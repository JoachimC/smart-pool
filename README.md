# smart-pool
Make swimming pools easy to manage and open for interfacing with other systems. Particularly for scenarios where 'smart' means combining information from multiple independent sources and/or orchestrating multiple independent devices. Based around, but not necessarily limited to (Home Assistant)[https://www.home-assistant.io/] as the central controller.

e.g. Scenarios directly related to the management of the pool:
* Make sure the pool is always exactly balanced and ready for swimming.
* Alert when chemical levels are low (by measuring / weighing automatically dosed stocks) or when the application of dosing is not effective at keeping the pool in balance.
* Run pool pumps when home solar panels have excess generation and only use grid electricty when the sanitation demands require it.
* Run pool heatpump when time-of-use electricty pricing is cheap (or negative)
* Never run pool equipment when there is a grid outage and house is running off residential battery
* Don't waste gas/power heating the pool if the weather forcast is for hot weather that will naturally heat the water over the next few days anyway

And of course a multitude of scenarios enabled by connection with the greater Home Asssitant ecosystem including monitoring for usage etc, setting scene lighting etc.

## Candidate Plan

* ESP2866 / ESP32 running (ESPHome)[https://esphome.io/]
* Altas Scientific EZO ORP and pH sensors connected to the ESPHome device using UART or I<sup>2</sup>C interface
  * https://esphome.io/components/sensor/ezo.html
  * https://atlas-scientific.com/
* commodity I<sup>2</sup>C temperature sensors monitoring at least:
  * pool water temperature
  * 'roof' temperature for radiant solar heating/cooling systems
  * general environmental temperature/condition/forecast (could come from other sources like weather feeds)
* Pumps, chlorinators, Heatpumps and others controlled using Home Assistant compatible smart GPOs, relays, smart plugs, or other control mechanisms. This should be flexible - anything Home Assistant compatible should be good for integration.

## Other alternatives
Find a 'smart enough' off-the-shelf pool controller that can be made smarter by either leveraging it's explicit external interfaces or interpolating scenarios by monitoring its power usage or other indirect 

## Background
Keeping swimming pools healthy and nice to swim in requires balancing a number of chemicals/parameters in the water pool. 

There are some 'smart' pool controllers/monitors on the market but at this time all seem to be 'closed' systems with their own apps but little if any consideration for interfacing with other systems.

The goal of this project is to use open, freely available hardware and software to make a user-configurable, monitorable and controllable pool system.

### In-Scope
Targetted for smart management

#### Sanitation
Most commonly provided by Chlorine. Added to the pool by:
  * Generated by a chlorinator in salt water pools, or
  * In powder or liquid form for freshwater pools

Measured with:
  * test strips
  * liquid drops
  * electronic ORP sensors (don't strictly measure chlorine but measure the oxidation potential of the water. Chlorine is an oxidising agent.)

Stabliser - Cyanuric Acid - is often used to help chlorine last between doses. It binds to some of the chlorine and releases as the free chlorine is used up.

#### pH
Keeps the water pleasant for body contact - eyes, skin etc.

Also some pool chemicals and treatments work best when the pool water is around specific optimum pH levels that generally align with comfortable swimming.

Maintained as a (buffer)[https://en.wikipedia.org/wiki/Buffer_solution] around 7.4 by a balance of acid (Sulphuric Acid) and alkaline (Sodium (Bi-) Carbonate.
  * acid is normally added as Sulfu 

Measured with:
  * test strips
  * liquid drops
  * electronic pH sensors

#### Temperature

Often the goal is to heat the pool but in some places cooling the pool is also desirable. Either way, pools with temperature management will have some device - a pump, heat pump, heater or radiator that will need to be turned on/off based on measurements of water and/or environmental conditions.

Warmer pools will require more sanitation


### Out of Scope

There are a number of other chemicals/parameters should be monitored and kept in range to keep the water, pool, and its equipment in best condition. At this time they are out of scope for this project.
